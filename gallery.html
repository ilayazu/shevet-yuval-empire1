<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>×’×œ×¨×™×™×ª ×©×‘×˜ ×™×•×‘×œ</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f2f2f2;
    text-align: center;
    padding-top: 180px;
}

/* HEADER */
header {
    position: fixed;
    top: 0;
    width: 100%;
    background: #1e90ff;
    color: white;
    padding: 10px 20px 20px;
    z-index: 1000;
}

.header-logos {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.logo { width: 90px; }
.logo-shark { width: 120px; }

header h1 { margin: 10px 0 0; }
header p { margin: 5px 0 0; }

/* GALLERY */
.gallery {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
    padding: 20px;
    max-width: 1000px;
    margin: auto;
}

.gallery-item {
    background: white;
    border-radius: 10px;
    padding: 5px;
}

.gallery-item img {
    width: 100%;
    border-radius: 10px;
    cursor: pointer;
}

.caption {
    font-size: 14px;
    margin-top: 5px;
}

/* LIGHTBOX */
.lightbox {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    color: white;
}

.lightbox img {
    max-width: 90%;
    max-height: 80%;
    border-radius: 10px;
}

.lightbox p {
    margin-top: 10px;
}

/* âž• BUTTON */
.add-btn {
    position: fixed;
    bottom: 20px;
    left: 20px;
    width: 60px;
    height: 60px;
    border-radius: 50%;
    background: #1e90ff;
    color: white;
    font-size: 36px;
    border: none;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.3);
}

/* MODAL */
.modal {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 3000;
}

.modal-content {
    background: white;
    padding: 20px;
    border-radius: 10px;
    width: 90%;
    max-width: 350px;
}

.modal-content input,
.modal-content textarea,
.modal-content button {
    width: 100%;
    padding: 10px;
    margin: 6px 0;
}

.modal-content button {
    background: #1e90ff;
    color: white;
    border: none;
    border-radius: 6px;
}
</style>
</head>

<body>

<header>
    <div class="header-logos">
        <img src="orange.png" class="logo" onclick="goHome()">
        <img src="image-removebg-preview.png" class="logo-shark" onclick="goHome()">
    </div>
    <h1>×’×œ×¨×™×™×ª ×©×‘×˜ ×™×•×‘×œ ðŸ“¸</h1>
    <p>×ª×ž×•× ×•×ª ×ž×”×©×‘×˜</p>
</header>

<div class="gallery" id="gallery"></div>

<!-- LIGHTBOX -->
<div class="lightbox" id="lightbox" onclick="closeLightbox()">
    <img id="lightboxImg">
    <p id="lightboxText"></p>
</div>

<!-- âž• -->
<button class="add-btn" onclick="openModal()">+</button>

<!-- MODAL -->
<div class="modal" id="modal">
    <div class="modal-content">
        <h3>×”×•×¡×¤×ª ×ª×ž×•× ×”</h3>
        <input type="password" id="password" placeholder="×¡×™×¡×ž×”">
        <input type="text" id="imageUrl" placeholder="×§×™×©×•×¨ ×œ×ª×ž×•× ×”">
        <textarea id="caption" placeholder="×¤×™×¨×•×˜ / ×ª×™××•×¨"></textarea>
        <button onclick="addImage()">×”×•×¡×£</button>
        <button onclick="closeModal()">×‘×™×˜×•×œ</button>
    </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getDatabase, ref, push, onValue } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

const firebaseConfig = {
  apiKey: "AIzaSyBWYcqh_J2OH8kK_H3Mn-mda9uE7Yy6fJU",
  authDomain: "shevet-yuval-gallery.firebaseapp.com",
  databaseURL: "https://shevet-yuval-gallery-default-rtdb.firebaseio.com",
  projectId: "shevet-yuval-gallery",
};

const app = initializeApp(firebaseConfig);
const db = getDatabase(app);
const imagesRef = ref(db, "images");

const UPLOAD_PASSWORD = "yuval123";

window.addImage = function() {
    if (password.value !== UPLOAD_PASSWORD) {
        alert("×¡×™×¡×ž×” ×©×’×•×™×”");
        return;
    }

    if (!imageUrl.value) return;

    push(imagesRef, {
        url: imageUrl.value,
        caption: caption.value
    });

    closeModal();
};

onValue(imagesRef, snapshot => {
    gallery.innerHTML = "";
    snapshot.forEach(child => {
        const data = child.val();

        const div = document.createElement("div");
        div.className = "gallery-item";

        div.innerHTML = `
            <img src="${data.url}">
            <div class="caption">${data.caption || ""}</div>
        `;

        div.querySelector("img").onclick = () => openLightbox(data.url, data.caption);
        gallery.appendChild(div);
    });
});

window.openLightbox = (src, text) => {
    lightboxImg.src = src;
    lightboxText.textContent = text || "";
    lightbox.style.display = "flex";
};

window.closeLightbox = () => lightbox.style.display = "none";

window.openModal = () => modal.style.display = "flex";
window.closeModal = () => modal.style.display = "none";

function goHome() {
    window.location.href = "hanihs.html";
}
</script>

</body>
</html>
